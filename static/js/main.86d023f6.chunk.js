(this["webpackJsonpmy-project"]=this["webpackJsonpmy-project"]||[]).push([[0],{12:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));var a=n(129),r=a.create({baseURL:"https://social-network.samuraijs.com/api/1.0",withCredentials:!0,headers:{"API-KEY":"3006778a-f87e-4e30-a4f7-992bfbee3fa7"}}),c={authMeApi:function(){return r.get("/auth/me").then((function(e){return e}))},logInApi:function(e,t,n,a){return r.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e}))},logAuthApi:function(){return r.delete("/auth/login").then((function(e){return e}))}},u={getUsersApi:function(e,t){return r.get("/users?page=".concat(e,"&count=").concat(t))},followApi:function(e){return r.post("/follow/".concat(e)).then((function(e){return e}))},unfollowApi:function(e){return r.delete("/follow/".concat(e)).then((function(e){return e}))}},o={getProfileApi:function(e){return r.get("/profile/".concat(e)).then((function(e){return e}))},getProfileInfoApi:function(e){return r.put("/profile",e).then((function(e){return e}))},getProfileStatusApi:function(e){return r.get("/profile/status/".concat(e)).then((function(e){return e}))},updateProfileStatusApi:function(e){return r.put("/profile/status",{status:e}).then((function(e){return e}))},getProfilePhotoApi:function(e){var t=new FormData;return t.append("image",e),r.put("/profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})}},i={getCaptchaUrlApi:function(){return r.get("/security/get-captcha-url").then((function(e){return e}))}}},121:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return b}));var a=n(7),r=n.n(a),c=n(9),u=n(12),o={users:[],currentPage:1,pageSize:10,totalItemsCount:null,isFitching:!1},i="/users/FOLLOW",s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/users/GET_USERS":return Object(c.a)({},e,{users:t.users});case"/users/CURRENT_PAGE":return Object(c.a)({},e,{currentPage:t.currentPage});case"/users/TOTAL_ITEMS_COUNT":return Object(c.a)({},e,{totalItemsCount:t.totalCount});case"/users/IS_FITCHING":return Object(c.a)({},e,{isFitching:t.isFitching});case i:return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)({},e,{followed:!0}):e}))});case"/users/UNFOLLOW":return Object(c.a)({},e,{users:e.users.map((function(e){return e.id===t.userId?Object(c.a)({},e,{followed:!1}):e}))});default:return e}},l=function(e){return{type:"/users/CURRENT_PAGE",currentPage:e}},f=function(e){return{type:"/users/IS_FITCHING",isFitching:e}},p=function(e){return{type:i,userId:e}},d=function(e){return{type:"/users/UNFOLLOW",userId:e}},m=function(e,t){return function(n){var a;return r.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n(f(!0)),c.next=3,r.a.awrap(u.d.getUsersApi(e,t));case 3:a=c.sent,n({type:"/users/GET_USERS",users:a.data.items}),n({type:"/users/TOTAL_ITEMS_COUNT",totalCount:a.data.totalCount}),n(l(e)),n(f(!1));case 8:case"end":return c.stop()}}))}},h=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(u.d.followApi(e));case 2:0===n.sent.data.resultCode&&t(p(e));case 4:case"end":return n.stop()}}))}},b=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(u.d.unfollowApi(e));case 2:0===n.sent.data.resultCode&&t(d(e));case 4:case"end":return n.stop()}}))}}},122:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return o}));var a=n(132),r=n(9),c={posts:[{post:"social-network",id:1},{post:"my project",id:2},{post:"Kamo Amirkhanyan",id:3}]},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/posts/ADD_POST":var n={post:t.newPost,id:1};return Object(r.a)({},e,{posts:[].concat(Object(a.a)(e.posts),[n])});default:return e}},o=function(e){return{type:"/posts/ADD_POST",newPost:e}}},126:function(e,t,n){e.exports=n.p+"static/media/preloader.ef474d09.gif"},158:function(e,t,n){e.exports=n(286)},163:function(e,t,n){},164:function(e,t,n){},28:function(e,t,n){e.exports={navbar:"navbar_navbar__3A14F",content:"navbar_content__1yQlH",activ:"navbar_activ__1NDv1"}},286:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(62),u=n.n(c),o=(n(163),n(49)),i=n(50),s=n(52),l=n(51),f=n(53),p=(n(164),n(31)),d=n.n(p),m=n(17),h=n(33),b=function(e){return e.profile?r.a.createElement("div",{className:d.a.header},r.a.createElement("div",{className:d.a.logo},r.a.createElement("h1",null,"S/N")),r.a.createElement("div",{className:d.a.content},r.a.createElement("div",{className:d.a.settingsbutton},"\ud83d\udee0 Setting"),e.isAuth?r.a.createElement("div",null,r.a.createElement("span",{onClick:function(){return e.logAuthThunk()},className:d.a.button},"Log Auth"),r.a.createElement("span",null,e.profile.fullName)):r.a.createElement(m.b,{to:"/login"},r.a.createElement("div",{className:d.a.button},"Login")))):r.a.createElement(h.a,null)},g=n(8),v=n(18),E=n(7),_=n.n(E),O=n(9),A=n(12),w=n(34),y={id:null,email:null,login:null,isAuth:!1,captchaUrl:null},T=function(e,t,n,a){return{type:"/auth/GET_AUTH_ME",payload:{id:e,email:t,login:n,isAuth:a}}},j=function(e){return{type:"/auth/GET_CAPTCHA_URL",payload:{captchaUrl:e}}},N=function(){return function(e){var t,n,a,r,c;return _.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,_.a.awrap(A.a.authMeApi());case 2:0===(t=u.sent).data.resultCode&&(n=t.data.data,a=n.id,r=n.email,c=n.login,e(T(a,r,c,!0)));case 4:case"end":return u.stop()}}))}},I=function(){return function(e){var t,n;return _.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,_.a.awrap(A.c.getCaptchaUrlApi());case 2:t=a.sent,n=t.data.url,e(j(n));case 5:case"end":return a.stop()}}))}},P=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b,{isAuth:this.props.isAuth,login:this.props.login,logAuthThunk:this.props.logAuthThunk,profile:this.props.profile}))}}]),t}(r.a.Component),x=Object(g.d)(Object(v.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login,profile:e.profilePage.profile}}),{logAuthThunk:function(){return function(e){return _.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.awrap(A.a.logAuthApi());case 2:0===t.sent.data.resultCode&&e(T(null,null,null,!1));case 4:case"end":return t.stop()}}))}}}))(P),C=n(28),U=n.n(C),S=function(){return r.a.createElement("div",{className:U.a.navbar},r.a.createElement("ul",{className:U.a.content},r.a.createElement(m.b,{activeClassName:U.a.activ,to:"/profile"},r.a.createElement("li",null,"Profile")),r.a.createElement(m.b,{activeClassName:U.a.activ,to:"/posts"},r.a.createElement("li",null,"Posts")),r.a.createElement(m.b,{activeClassName:U.a.activ,to:"/users"},r.a.createElement("li",null,"Users")),r.a.createElement(m.b,{activeClassName:U.a.activ,to:"/photos"},r.a.createElement("li",null,"Photos")),r.a.createElement(m.b,{activeClassName:U.a.activ,to:"/news"}," ",r.a.createElement("li",null,"News"))))},k=n(27),L=n(48),F=n.n(L),G=n(123),M=n(124),R=n(63),z=n(43),D=Object(z.a)(25),H=Object(M.a)({form:"login"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",{className:F.a.fild},r.a.createElement(G.a,{component:R.a,validate:[z.b,D],name:"email"})),r.a.createElement("div",{className:F.a.fild},r.a.createElement(G.a,{component:R.a,validate:[z.b,D],name:"password",type:"password"})),r.a.createElement("div",null,r.a.createElement(G.a,{component:"input",name:"rememberMe",type:"checkbox"})),r.a.createElement("div",null,r.a.createElement("button",null,"Log In")),r.a.createElement("div",null,e.error&&e.error),r.a.createElement("div",null,e.captchaUrl&&r.a.createElement("img",{src:e.captchaUrl}),e.captchaUrl&&r.a.createElement(G.a,{name:"captcha",component:R.a,validate:z.b})))})),W=Object(v.b)((function(e){return{isAuth:e.auth.isAuth,captchaUrl:e.auth.captchaUrl}}),{logInThunk:function(e,t,n,a){return function(r){var c,u;return _.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,_.a.awrap(A.a.logInApi(e,t,n,a));case 2:0===(c=o.sent).data.resultCode?r(N()):(10===c.data.resultCode&&r(I()),u=c.data.messages.length>0?c.data.messages[0]:"some error",r(Object(w.a)("login",{_error:u})));case 4:case"end":return o.stop()}}))}}})((function(e){if(e.isAuth)return r.a.createElement(k.a,{to:"/profile"});return r.a.createElement("div",{className:F.a.login},r.a.createElement("div",{className:F.a.content},r.a.createElement("center",null,r.a.createElement("h1",null,"Login"),r.a.createElement(H,{onSubmit:function(t){e.logInThunk(t.email,t.password,t.rememberMe,t.captcha)},captchaUrl:e.captchaUrl}))))})),B={initialaized:!1},J=function(e){return function(t){return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null,r.a.createElement(h.a,null))},r.a.createElement(e,t))}},K=r.a.lazy((function(){return n.e(4).then(n.bind(null,295))})),X=r.a.lazy((function(){return n.e(5).then(n.bind(null,296))})),Y=r.a.lazy((function(){return n.e(3).then(n.bind(null,297))})),Z=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initialaizedThunk()}},{key:"render",value:function(){return this.props.initialaized?r.a.createElement("div",null,r.a.createElement(x,null),r.a.createElement("div",{className:"pages-content"},r.a.createElement("div",{className:"navbar-page"},r.a.createElement(S,null)),r.a.createElement(k.b,{path:"/users",render:J(Y)}),r.a.createElement(k.b,{path:"/profile/:userId?",render:J(K)}),r.a.createElement(k.b,{path:"/login",render:function(){return r.a.createElement(W,null)}}),r.a.createElement(k.b,{path:"/posts",render:J(X)}))):r.a.createElement(h.a,null)}}]),t}(r.a.Component),q=Object(g.d)(Object(v.b)((function(e){return{initialaized:e.app.initialaized}}),{initialaizedThunk:function(){return function(e){return _.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:e(N()).then((function(){return e({type:"/app/INITIALAIZED"})}));case 2:case"end":return t.stop()}}))}}}),k.f)(Z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=n(131),V=n(121),$=n(90),ee=n(125),te=n(122),ne=Object(g.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/auth/GET_CAPTCHA_URL":case"/auth/GET_AUTH_ME":return Object(O.a)({},e,{},t.payload);default:return e}},usersPage:V.d,profilePage:$.e,form:ee.a,myPosts:te.b,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/app/INITIALAIZED":return Object(O.a)({},e,{initialaized:!0});default:return e}}}),ae=Object(g.e)(ne,Object(g.a)(Q.a));u.a.render(r.a.createElement(v.a,{store:ae},r.a.createElement(m.a,{basename:"/social-net-work"},r.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},31:function(e,t,n){e.exports={header:"header_header__GC8GN",content:"header_content__3TVH0",button:"header_button__mNwrE",settingsbutton:"header_settingsbutton__364gX",logo:"header_logo__2fXru",photo:"header_photo__2TbDO"}},32:function(e,t,n){e.exports={textareaForm:"fields_textareaForm__3csU7",erroreMessag:"fields_erroreMessag__3k5Fq",inputForm:"fields_inputForm__3OAR7",errorInfo:"fields_errorInfo__1y6Sc"}},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(0),r=n.n(a),c=n(126),u=n.n(c),o=function(){return r.a.createElement("div",null,r.a.createElement("img",{src:u.a}))}},43:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=function(e){if(!e)return"empty field"},r=function(e){return function(t){if(t.length>e)return"max number of characters ".concat(e)}}},48:function(e,t,n){e.exports={login:"login_login__LO-Yz",content:"login_content__33oWy",fild:"login_fild__SOrL3"}},63:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var a=n(87),r=n(0),c=n.n(r),u=n(32),o=n.n(u),i=function(e){var t=e.meta,n=e.input,r=Object(a.a)(e,["meta","input"]),u=t.error&&t.touched;return c.a.createElement("div",{className:o.a.textareaForm},c.a.createElement("div",{className:u&&o.a.erroreMessag},c.a.createElement("textarea",Object.assign({},n,r))),c.a.createElement("div",{className:o.a.errorInfo},u&&"".concat(t.error," !!!")))},s=function(e){var t=e.meta,n=e.input,r=Object(a.a)(e,["meta","input"]),u=t.error&&t.touched;return c.a.createElement("div",{className:o.a.inputForm},c.a.createElement("div",{className:u&&o.a.erroreMessag},c.a.createElement("input",Object.assign({},n,r))),c.a.createElement("div",{className:o.a.errorInfo},u&&"".concat(t.error," !!!")))}},90:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return m})),n.d(t,"a",(function(){return h}));var a=n(7),r=n.n(a),c=n(9),u=n(12),o=n(34),i={profile:null,status:""},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/profile/GET_PROFILE":return Object(c.a)({},e,{profile:t.profile});case"/profile/GET_STATUS":return Object(c.a)({},e,{status:t.status});case"/profile/GET_PROFILE_PHOTO":return Object(c.a)({},e,{profile:Object(c.a)({},e.profile,{photos:t.photos})});default:return e}},l=function(e){return{type:"/profile/GET_STATUS",status:e}},f=function(e){return function(t){u.b.getProfileApi(e).then((function(e){t({type:"/profile/GET_PROFILE",profile:e.data})}))}},p=function(e){return function(t,n){var a,c;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=n().auth.id,i.next=3,r.a.awrap(u.b.getProfileInfoApi(e));case 3:if(0!==(c=i.sent).data.resultCode){i.next=8;break}t(f(a)),i.next=10;break;case 8:return t(Object(o.a)("edit-profile",{_error:c.data.messages[0]})),i.abrupt("return",Promise.reject(c.data.messages[0]));case 10:case"end":return i.stop()}}))}},d=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(u.b.getProfileStatusApi(e));case 2:n=a.sent,t(l(n.data));case 4:case"end":return a.stop()}}))}},m=function(e){return function(t){return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.awrap(u.b.updateProfileStatusApi(e));case 2:0===n.sent.data.resultCode&&t(l(e));case 4:case"end":return n.stop()}}))}},h=function(e){return function(t){var n;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(u.b.getProfilePhotoApi(e));case 2:0===(n=a.sent).data.resultCode&&t({type:"/profile/GET_PROFILE_PHOTO",photos:n.data.data.photos});case 4:case"end":return a.stop()}}))}}}},[[158,1,2]]]);
//# sourceMappingURL=main.86d023f6.chunk.js.map